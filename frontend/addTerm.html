<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/addterm.css">
    <link rel="stylesheet" href="styles/buttons.css">
    <link rel="stylesheet" href="styles/popup.css">
    <link rel="stylesheet" href="styles/common_styles.css">
    <link rel="stylesheet" href="styles/list_styles.css">
    <title>Add term</title>
</head>
<body>
    <h1>Add Inspection term</h1>
    <div style="width: 100%; display: flex; ">
    <div id="search"  class="container_list">
        <div style="padding: 10px;">
            <h3> 
                Inspection Terms:
            </h3>

            <div style="width: 50%;">

                <div class="row" id="select_inspected">
                    Select inspected:
                    <select id="inspectedPicker" class="pickers">
                        <option value="">Select Inspected</option>
                    </select>
                </div>
    
                <div class="row" id="select_subject">
                    Subject: 
                    <select id="subjectPicker" class="pickers">
                        <option value="">Select Subject</option>
                    </select>
                </div>
    
                <div class="row" id="select_date">
                    Date
                    <select id="datePicker" class="pickers">
                        <option value="">Select Date</option>
                    </select>
                </div>
                
                <div class="row" id="select_inspectors">
                    Inspectors:
                    <select id="teamPicker"  class="pickers">
                        <option value="">Select Inspectors</option>
                    </select>
                </div>
            </div>
            <hr style="border-top : 3px static #000000;">
            <div id="editable" class="hidden">     
                <h3>
                    Term details:
                </h3>
                <div class="row">
                    Inspected:
                    <div id="info_inspected">

                    </div>
                </div>
                <div  class="row">
                    Department: 
                    <div id="info_department"></div>

                </div>
                <div  class="row">
                    Subject:
                    <div id="info_subject"></div>
                </div>
                <div  class="row">
                    Date and location: 
                    <div id="info_date"></div>
                </div>
                <div>
                    Inspectors:
                    <div id="info_inspectors"></div>
                </div>
            </div>
    
            <a class="button_save" id="buttonSave" style="position: absolute; bottom: 0;left: 0; margin: 20px ;" onclick="save_docs()">Add</a>
            <a class="button_cancel" id="buttonCancel" href="index.html" style="position: absolute; bottom: 0; left: 105px;  margin: 20px ;">Cancel</a>
            
        </div>
    </div>    
</div>  
    
    <script type="module" src="addTerm.js"></script>
    <script>
        function checkPickers() {
            const inspectedPicker = document.getElementById("inspectedPicker");
            const subjectPicker = document.getElementById("subjectPicker");
            const datePicker = document.getElementById("datePicker");
            const teamPicker = document.getElementById("teamPicker");

            const editableDiv = document.getElementById("editable");

            if(inspectedPicker.value === "" || subjectPicker.value === "" || datePicker.value === "" || teamPicker.value === ""){
                editableDiv.classList.add("hidden");
                return;
            }
                editableDiv.classList.remove("hidden");
            }

            const pickers = document.querySelectorAll('.pickers');
    pickers.forEach(picker => {
        picker.addEventListener('change', checkPickers);
    });

    function save_docs() {
            const inspectedPicker = document.getElementById("inspectedPicker");
            const subjectPicker = document.getElementById("subjectPicker");
            const datePicker = document.getElementById("datePicker");
            const teamPicker = document.getElementById("teamPicker");
            console.log(inspectedPicker.value); 
            console.log(subjectPicker.value);
            console.log(datePicker.value);
            console.log(teamPicker.value);


            if(inspectedPicker.value === "" || subjectPicker.value === "" || datePicker.value === "" || teamPicker.value === ""){

                    const overlay = document.createElement('div');
                    overlay.className = 'popup_overlay';
                    
                    const content = document.createElement('div');
                    content.className = 'popup_content';

                    
                    const text = document.createElement('p');
                    text.className = 'popup_text';
                    text.textContent = 'Ivalid input data!';
                    content.appendChild(text);


                    const okButton = document.createElement('button');
                    okButton.className = 'ok_popup_btn';
                    okButton.textContent = 'Ok';
                    content.appendChild(okButton);

                    overlay.appendChild(content);
                    document.body.appendChild(overlay);

                    okButton.addEventListener('click', () => {
                        overlay.remove();
                    });

                    
                    if(inspectedPicker.value === ""){
                        inspectedPicker.classList.add("input_error")
                    }else
                    {
                        inspectedPicker.classList.remove("input_error")
                    }
                    if(subjectPicker.value === "" ){
                        subjectPicker.classList.add("input_error")
                    }else
                    {
                        subjectPicker.classList.remove("input_error")
                    }
                    if(datePicker.value === "" ){
                        datePicker.classList.add("input_error")
                    }else
                    {
                        datePicker.classList.remove("input_error")
                    }
                    if(teamPicker.value === "" ){
                        teamPicker.classList.add("input_error")
                    }else
                    {
                        teamPicker.classList.remove("input_error")
                    }
                    return;
                }
                
            }
        
    </script>
    
</body>
</html>